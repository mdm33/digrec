<% javascript "sentence_divisions" %>
<% stylesheet 'sentence_divisions' %>

<%= render :partial => 'shared/location', :locals => { :sentence => @sentence, :title => 'Annotation', :value => 'Sentence divisions', :edit_url => :edit_sentence_sentence_division_url } %>

<div class="sentence-divisions">
  <%= format_presentation_text(@sentence.sentences_in_context, {
    :section_numbers => true,
    :sentence_numbers => true,
    :highlight => [@sentence]
  }) %>
</div>

<div class="adjustment-area">
  <% @fixed.each do |token| %>
    <span class="covered adjustable"><%= token.form %><span class="token-number"><%= token.token_number %></span></span>
  <% end %>
  <% @shorten.each_with_index do |token, i| %>
    <span class="covered adjustable" id="change<%= i + 1 - @shorten.length %>"><%= token.form %><span class="token-number"><%= token.token_number %></span></span>
  <% end %>
  <% @expand.each_with_index do |token, i| %>
    <span class="adjustable" id="change<%= i + 1 %>"><%= token.form %><span class="token-number"><%= token.token_number %></span></span>
  <% end %>
</div>

<div class="annotation-actions">
  <% form_tag({ :controller => 'sentence_divisions', :action => 'update', :sentence_id => @sentence }, :method => :put) do -%>
    <%= hidden_field_tag 'change' %>
    <%= submit_tag "Save", :id => 'submit' %>
 <% end %>
</div>
