<% roundedbox do -%>
  <%=h @token.citation %> <%= readable_completion(@token.sentence, :checkmark => :only) %><br/>
  <%= external_text_links(@token.sentence) %><br/>
  <%= link_to_resources @token, :index, :previous, :next, :parent, :edit %>
<% end %>

<% layer "annotation" do -%>
  <% if @token.form %>
    <dt>Form:</dt><dd class="foreign-word"><%= format_token_form(@token) %></dd>
  <% end %>
  <% if @token.is_morphtaggable? and @token.morph_features %>
    <dt>Part of speech:</dt><dd><%= @token.morph_features.pos_summary.capitalize %></dd>
    <dt>Morphology:</dt><dd><%= @token.morph_features.morphology_summary.capitalize %></dd>
    <dt>Lemma:</dt><dd class="foreign-word"><%= @token.lemma ? link_to_lemma(@token.lemma) : '&nbsp;' %></dd>
  <% end %>
  <% if @token.relation %>
    <dt>Dependency relation:</dt><dd><%= readable_dependency(@token.relation, @token.head ? link_to(@token.head.id, @token.head) : nil) %></dd>
  <% end %>
  <% if @token.foreign_ids %>
    <dt>Foreign IDs:</dt><dd class="tag"><%= @token.foreign_ids %></dd>
  <% end %>
<% end %>

<% layer_unless @token.notes.empty?, "notes" do -%>
  <%= notes_summary @token.notes %>
<% end %>

<% layer_unless @semantic_tags.empty?, 'semantic_tags' do -%>
  <%= semantic_tags_summary(@semantic_tags) %>
<% end %>

<% layer_unless @outgoing_semantic_relations.empty?, 'outgoing_semantic_relations' do -%>
  <%= semantic_relations_summary(@outgoing_semantic_relations, incoming = false) %>
<% end %>

<% layer_unless @incoming_semantic_relations.empty?, 'incoming_semantic_relations' do -%>
  <%= semantic_relations_summary(@incoming_semantic_relations) %>
<% end %>

<% layer_unless @token.audits.empty?, "revisions" do -%>
  <%= audits_summary @token.audits %>
<% end %>
